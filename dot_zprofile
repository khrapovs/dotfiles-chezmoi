# ---------- Environment & Paths (one-time per login) ----------
export PYTHON_AUTO_VRUN=true
export PYTHON_VENV_NAME=".venv"
export EDITOR='nvim'
export JUPYTER_PLATFORM_DIRS=1

# PATHs (keep them centralized)
export PATH="$HOME/.local/bin:$PATH"

# Homebrew (fast path + env) — guarded
if command -v brew >/dev/null 2>&1; then
  eval "$(/opt/homebrew/bin/brew shellenv)"
fi

# NVM — load only the shell env, avoid running if files missing
export NVM_DIR="$HOME/.nvm"
if [ -s "/opt/homebrew/opt/nvm/nvm.sh" ]; then
  . "/opt/homebrew/opt/nvm/nvm.sh"
fi
# (Optional) bash_completion for nvm is non-essential; skip for speed or keep guarded:
if [ -s "/opt/homebrew/opt/nvm/etc/bash_completion.d/nvm" ]; then
  . "/opt/homebrew/opt/nvm/etc/bash_completion.d/nvm"
fi

# Bitwarden SSH Agent (constant env)
export SSH_AUTH_SOCK="$HOME/Library/Containers/com.bitwarden.desktop/Data/.bitwarden-ssh-agent.sock"

# gcloud path/completions — guard to avoid errors on machines without SDK
if [ -s "/opt/homebrew/share/google-cloud-sdk/path.zsh.inc" ]; then
  . "/opt/homebrew/share/google-cloud-sdk/path.zsh.inc"
fi
if [ -s "/opt/homebrew/share/google-cloud-sdk/completion.zsh.inc" ]; then
  . "/opt/homebrew/share/google-cloud-sdk/completion.zsh.inc"
fi

# rclone (env only)
export RCLONE_EXCLUDE='".Trashes/**","._.Trashes",".Spotlight-V100/**",".fseventsd/**"'

